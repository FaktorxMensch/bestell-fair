name: Enable automerge on branch main

on:
  pull_request:
    branches: [main]

jobs:
  automerge:
    name: Enable automerge on dependabot PRs
    runs-on: ubuntu-latest
    strategy:
      matrix:
        allowed_authors: ['ziegenhagel', 'leubeem', 'najajan-de']
    steps:
      - name: Enable automerge on dependabot PRs
        uses: daneden/enable-automerge-action@v1
        with:
          # A personal access token that you have generated and saved in the
          # repo or orgâ€™s encrypted secrets
          github-token: ${{ secrets.PERSONAL_ACCESS_TOKEN }}

          # The name of the PR author to enable automerge for
          # Defaults to dependabot[bot]
          allowed-author: ${{ matrix.allowed_authors }}

          # Allowed values: MERGE | SQUASH | REBASE
          # Defaults to MERGE
          merge-method: REBASE